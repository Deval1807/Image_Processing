{"ast":null,"code":"/*\n\n  db.collection.find().stream().pipe(Stringify()).pipe(res)\n\n*/\nvar Transform = require('stream').Transform;\nvar util = require('util');\nutil.inherits(Stringify, Transform);\nmodule.exports = Stringify;\nfunction Stringify(options) {\n  if (!(this instanceof Stringify)) return new Stringify(options || {});\n  Transform.call(this, options || {});\n  this._writableState.objectMode = true;\n}\n\n// Flags\nStringify.prototype.destroyed = false;\nStringify.prototype.started = false;\n\n// Array delimiters\nStringify.prototype.open = new Buffer('[\\n', 'utf8');\nStringify.prototype.seperator = new Buffer('\\n,\\n', 'utf8');\nStringify.prototype.close = new Buffer('\\n]\\n', 'utf8');\n\n// JSON.stringify options\nStringify.prototype.replacer = null;\nStringify.prototype.space = 0;\nStringify.prototype._transform = function (doc, enc, cb) {\n  if (this.destroyed) return;\n  if (this.started) {\n    this.push(this.seperator);\n  } else {\n    this.push(this.open);\n    this.started = true;\n  }\n  try {\n    doc = JSON.stringify(doc, this.replacer, this.space);\n  } catch (err) {\n    cb(err);\n    return;\n  }\n  this.push(new Buffer(doc, 'utf8'));\n  cb();\n};\nStringify.prototype._flush = function (cb) {\n  if (this.destroyed) return;\n  if (!this.started) this.push(this.open);\n  this.push(this.close);\n  this.push(null);\n  cb();\n};\nStringify.prototype.destroy = function () {\n  if (!this.destroyed) {\n    this.emit('close');\n    this.destroyed = true;\n  }\n};","map":{"version":3,"names":["Transform","require","util","inherits","Stringify","module","exports","options","call","_writableState","objectMode","prototype","destroyed","started","open","Buffer","seperator","close","replacer","space","_transform","doc","enc","cb","push","JSON","stringify","err","_flush","destroy","emit"],"sources":["C:/Users/Sagar/Desktop/Sensor/my-app/node_modules/streaming-json-stringify/index.js"],"sourcesContent":["/*\n\n  db.collection.find().stream().pipe(Stringify()).pipe(res)\n\n*/\nvar Transform = require('stream').Transform\nvar util = require('util')\n\nutil.inherits(Stringify, Transform)\n\nmodule.exports = Stringify\n\nfunction Stringify(options) {\n  if (!(this instanceof Stringify))\n    return new Stringify(options || {})\n\n  Transform.call(this, options || {})\n  this._writableState.objectMode = true\n}\n\n// Flags\nStringify.prototype.destroyed = false\nStringify.prototype.started = false\n\n// Array delimiters\nStringify.prototype.open = new Buffer('[\\n', 'utf8')\nStringify.prototype.seperator = new Buffer('\\n,\\n', 'utf8')\nStringify.prototype.close = new Buffer('\\n]\\n', 'utf8')\n\n// JSON.stringify options\nStringify.prototype.replacer = null\nStringify.prototype.space = 0\n\nStringify.prototype._transform = function (doc, enc, cb) {\n  if (this.destroyed)\n    return\n\n  if (this.started) {\n    this.push(this.seperator)\n  } else {\n    this.push(this.open)\n    this.started = true\n  }\n\n  try {\n    doc = JSON.stringify(doc, this.replacer, this.space)\n  } catch (err) {\n    cb(err)\n    return\n  }\n\n  this.push(new Buffer(doc, 'utf8'))\n  cb()\n}\n\nStringify.prototype._flush = function (cb) {\n  if (this.destroyed)\n    return\n\n  if (!this.started)\n    this.push(this.open)\n\n  this.push(this.close)\n  this.push(null)\n  cb()\n}\n\nStringify.prototype.destroy = function () {\n  if (!this.destroyed) {\n    this.emit('close')\n    this.destroyed = true\n  }\n}"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,IAAIA,SAAS,GAAGC,OAAO,CAAC,QAAQ,CAAC,CAACD,SAAS;AAC3C,IAAIE,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAE1BC,IAAI,CAACC,QAAQ,CAACC,SAAS,EAAEJ,SAAS,CAAC;AAEnCK,MAAM,CAACC,OAAO,GAAGF,SAAS;AAE1B,SAASA,SAASA,CAACG,OAAO,EAAE;EAC1B,IAAI,EAAE,IAAI,YAAYH,SAAS,CAAC,EAC9B,OAAO,IAAIA,SAAS,CAACG,OAAO,IAAI,CAAC,CAAC,CAAC;EAErCP,SAAS,CAACQ,IAAI,CAAC,IAAI,EAAED,OAAO,IAAI,CAAC,CAAC,CAAC;EACnC,IAAI,CAACE,cAAc,CAACC,UAAU,GAAG,IAAI;AACvC;;AAEA;AACAN,SAAS,CAACO,SAAS,CAACC,SAAS,GAAG,KAAK;AACrCR,SAAS,CAACO,SAAS,CAACE,OAAO,GAAG,KAAK;;AAEnC;AACAT,SAAS,CAACO,SAAS,CAACG,IAAI,GAAG,IAAIC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC;AACpDX,SAAS,CAACO,SAAS,CAACK,SAAS,GAAG,IAAID,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC;AAC3DX,SAAS,CAACO,SAAS,CAACM,KAAK,GAAG,IAAIF,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC;;AAEvD;AACAX,SAAS,CAACO,SAAS,CAACO,QAAQ,GAAG,IAAI;AACnCd,SAAS,CAACO,SAAS,CAACQ,KAAK,GAAG,CAAC;AAE7Bf,SAAS,CAACO,SAAS,CAACS,UAAU,GAAG,UAAUC,GAAG,EAAEC,GAAG,EAAEC,EAAE,EAAE;EACvD,IAAI,IAAI,CAACX,SAAS,EAChB;EAEF,IAAI,IAAI,CAACC,OAAO,EAAE;IAChB,IAAI,CAACW,IAAI,CAAC,IAAI,CAACR,SAAS,CAAC;EAC3B,CAAC,MAAM;IACL,IAAI,CAACQ,IAAI,CAAC,IAAI,CAACV,IAAI,CAAC;IACpB,IAAI,CAACD,OAAO,GAAG,IAAI;EACrB;EAEA,IAAI;IACFQ,GAAG,GAAGI,IAAI,CAACC,SAAS,CAACL,GAAG,EAAE,IAAI,CAACH,QAAQ,EAAE,IAAI,CAACC,KAAK,CAAC;EACtD,CAAC,CAAC,OAAOQ,GAAG,EAAE;IACZJ,EAAE,CAACI,GAAG,CAAC;IACP;EACF;EAEA,IAAI,CAACH,IAAI,CAAC,IAAIT,MAAM,CAACM,GAAG,EAAE,MAAM,CAAC,CAAC;EAClCE,EAAE,CAAC,CAAC;AACN,CAAC;AAEDnB,SAAS,CAACO,SAAS,CAACiB,MAAM,GAAG,UAAUL,EAAE,EAAE;EACzC,IAAI,IAAI,CAACX,SAAS,EAChB;EAEF,IAAI,CAAC,IAAI,CAACC,OAAO,EACf,IAAI,CAACW,IAAI,CAAC,IAAI,CAACV,IAAI,CAAC;EAEtB,IAAI,CAACU,IAAI,CAAC,IAAI,CAACP,KAAK,CAAC;EACrB,IAAI,CAACO,IAAI,CAAC,IAAI,CAAC;EACfD,EAAE,CAAC,CAAC;AACN,CAAC;AAEDnB,SAAS,CAACO,SAAS,CAACkB,OAAO,GAAG,YAAY;EACxC,IAAI,CAAC,IAAI,CAACjB,SAAS,EAAE;IACnB,IAAI,CAACkB,IAAI,CAAC,OAAO,CAAC;IAClB,IAAI,CAAClB,SAAS,GAAG,IAAI;EACvB;AACF,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}