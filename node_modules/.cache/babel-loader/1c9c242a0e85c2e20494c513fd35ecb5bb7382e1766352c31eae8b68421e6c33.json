{"ast":null,"code":"const isFn = obj => typeof obj === 'function';\nconst isAsyncFn = fn => fn.prototype.constructor.name.endsWith('Async');\nconst promisify = fn => function () {\n  if (isFn(arguments[arguments.length - 1])) {\n    return fn.apply(this, arguments);\n  }\n  return new Promise((resolve, reject) => {\n    const args = Array.prototype.slice.call(arguments);\n    args.push(function (err, res) {\n      if (err) {\n        return reject(err);\n      }\n      return resolve(res);\n    });\n    fn.apply(this, args);\n  });\n};\nmodule.exports = cv => {\n  const fns = Object.keys(cv).filter(k => isFn(cv[k])).map(k => cv[k]);\n  const asyncFuncs = fns.filter(isAsyncFn);\n  const clazzes = fns.filter(fn => !!Object.keys(fn.prototype).length);\n  clazzes.forEach(clazz => {\n    const protoFnKeys = Object.keys(clazz.prototype).filter(k => isAsyncFn(clazz.prototype[k]));\n    protoFnKeys.forEach(k => clazz.prototype[k] = promisify(clazz.prototype[k]));\n  });\n  asyncFuncs.forEach(fn => {\n    cv[fn.prototype.constructor.name] = promisify(fn);\n  });\n  return cv;\n};","map":{"version":3,"names":["isFn","obj","isAsyncFn","fn","prototype","constructor","name","endsWith","promisify","arguments","length","apply","Promise","resolve","reject","args","Array","slice","call","push","err","res","module","exports","cv","fns","Object","keys","filter","k","map","asyncFuncs","clazzes","forEach","clazz","protoFnKeys"],"sources":["C:/Users/Sagar/Desktop/Sensor/my-app/node_modules/opencv4nodejs/lib/promisify.js"],"sourcesContent":["const isFn = obj => typeof obj === 'function';\r\nconst isAsyncFn = fn => fn.prototype.constructor.name.endsWith('Async');\r\n\r\nconst promisify = (fn) => function () {\r\n  if (isFn(arguments[arguments.length - 1])) {\r\n    return fn.apply(this, arguments);\r\n  }\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const args = Array.prototype.slice.call(arguments);\r\n    args.push(function(err, res) {\r\n      if (err) {\r\n        return reject(err);\r\n      }\r\n      return resolve(res);\r\n    });\r\n\r\n    fn.apply(this, args);\r\n  });\r\n};\r\n\r\nmodule.exports = (cv) => {\r\n  const fns = Object.keys(cv).filter(k => isFn(cv[k])).map(k => cv[k]);\r\n  const asyncFuncs = fns.filter(isAsyncFn);\r\n  const clazzes = fns.filter(fn => !!Object.keys(fn.prototype).length);\r\n\r\n  clazzes.forEach((clazz) => {\r\n    const protoFnKeys = Object.keys(clazz.prototype).filter(k => isAsyncFn(clazz.prototype[k]));\r\n    protoFnKeys.forEach(k => clazz.prototype[k] = promisify(clazz.prototype[k]));\r\n  });\r\n\r\n  asyncFuncs.forEach((fn) => {\r\n    cv[fn.prototype.constructor.name] = promisify(fn);\r\n  });\r\n\r\n  return cv;\r\n};"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,GAAG,IAAI,OAAOA,GAAG,KAAK,UAAU;AAC7C,MAAMC,SAAS,GAAGC,EAAE,IAAIA,EAAE,CAACC,SAAS,CAACC,WAAW,CAACC,IAAI,CAACC,QAAQ,CAAC,OAAO,CAAC;AAEvE,MAAMC,SAAS,GAAIL,EAAE,IAAK,YAAY;EACpC,IAAIH,IAAI,CAACS,SAAS,CAACA,SAAS,CAACC,MAAM,GAAG,CAAC,CAAC,CAAC,EAAE;IACzC,OAAOP,EAAE,CAACQ,KAAK,CAAC,IAAI,EAAEF,SAAS,CAAC;EAClC;EAEA,OAAO,IAAIG,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMC,IAAI,GAAGC,KAAK,CAACZ,SAAS,CAACa,KAAK,CAACC,IAAI,CAACT,SAAS,CAAC;IAClDM,IAAI,CAACI,IAAI,CAAC,UAASC,GAAG,EAAEC,GAAG,EAAE;MAC3B,IAAID,GAAG,EAAE;QACP,OAAON,MAAM,CAACM,GAAG,CAAC;MACpB;MACA,OAAOP,OAAO,CAACQ,GAAG,CAAC;IACrB,CAAC,CAAC;IAEFlB,EAAE,CAACQ,KAAK,CAAC,IAAI,EAAEI,IAAI,CAAC;EACtB,CAAC,CAAC;AACJ,CAAC;AAEDO,MAAM,CAACC,OAAO,GAAIC,EAAE,IAAK;EACvB,MAAMC,GAAG,GAAGC,MAAM,CAACC,IAAI,CAACH,EAAE,CAAC,CAACI,MAAM,CAACC,CAAC,IAAI7B,IAAI,CAACwB,EAAE,CAACK,CAAC,CAAC,CAAC,CAAC,CAACC,GAAG,CAACD,CAAC,IAAIL,EAAE,CAACK,CAAC,CAAC,CAAC;EACpE,MAAME,UAAU,GAAGN,GAAG,CAACG,MAAM,CAAC1B,SAAS,CAAC;EACxC,MAAM8B,OAAO,GAAGP,GAAG,CAACG,MAAM,CAACzB,EAAE,IAAI,CAAC,CAACuB,MAAM,CAACC,IAAI,CAACxB,EAAE,CAACC,SAAS,CAAC,CAACM,MAAM,CAAC;EAEpEsB,OAAO,CAACC,OAAO,CAAEC,KAAK,IAAK;IACzB,MAAMC,WAAW,GAAGT,MAAM,CAACC,IAAI,CAACO,KAAK,CAAC9B,SAAS,CAAC,CAACwB,MAAM,CAACC,CAAC,IAAI3B,SAAS,CAACgC,KAAK,CAAC9B,SAAS,CAACyB,CAAC,CAAC,CAAC,CAAC;IAC3FM,WAAW,CAACF,OAAO,CAACJ,CAAC,IAAIK,KAAK,CAAC9B,SAAS,CAACyB,CAAC,CAAC,GAAGrB,SAAS,CAAC0B,KAAK,CAAC9B,SAAS,CAACyB,CAAC,CAAC,CAAC,CAAC;EAC9E,CAAC,CAAC;EAEFE,UAAU,CAACE,OAAO,CAAE9B,EAAE,IAAK;IACzBqB,EAAE,CAACrB,EAAE,CAACC,SAAS,CAACC,WAAW,CAACC,IAAI,CAAC,GAAGE,SAAS,CAACL,EAAE,CAAC;EACnD,CAAC,CAAC;EAEF,OAAOqB,EAAE;AACX,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}